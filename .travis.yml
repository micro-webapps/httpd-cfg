language: cpp
compiler:
  - gcc
install:
  - sudo add-apt-repository ppa:ondrej/apache2 -y
  - sudo apt-get -qq update
  - sudo apt-get -qq install python3 apache2 apache2-mpm-prefork apache2-dev
script:
  #- sudo sh -c "cat /etc/apache2/mods-enabled/* /etc/apache2/apache2.conf > /etc/apache2/apache2.test"
  #- sudo mv /etc/apache2/apache2.test /etc/apache2/apache2.conf
  #- sudo cat /etc/apache2/apache2.conf
  - sudo cp /etc/apache2/apache2.conf /etc/apache2/httpd.conf
  - ./runtests
  - cat /home/travis/build/micro-webapps/httpd-cfg/tests/apache-test/t/conf/httpd.conf
branches:
  only:
    - master
notifications:
  #irc:
    #channels:
      #- "chat.freenode.net#mwa"
    #template:
      #- "%{repository}/%{branch} (%{commit} - %{author}): %{message}"
  email:
    recipients:
      - jkaluza@redhat.com
    on_success: always
    on_failure: always
